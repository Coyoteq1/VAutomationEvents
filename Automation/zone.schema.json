{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Zone",
  "description": "A zone in the Vauto automation system",
  "type": "object",
  "properties": {
    "zoneId": {
      "type": "string",
      "description": "Unique identifier for the zone"
    },
    "name": {
      "type": "string",
      "description": "Display name of the zone"
    },
    "enabled": {
      "type": "boolean",
      "description": "Whether the zone is active"
    },
    "difficulty": {
      "type": "string",
      "enum": ["Easy", "Medium", "Hard", "Nightmare"],
      "description": "Difficulty level of the zone"
    },
    "description": {
      "type": "string",
      "description": "Description of the zone"
    },
    "location": {
      "type": "object",
      "properties": {
        "center": {
          "type": "object",
          "properties": {
            "x": { "type": "number" },
            "y": { "type": "number" },
            "z": { "type": "number" }
          },
          "required": ["x", "y", "z"]
        },
        "radius": { "type": "number" },
        "bounds": {
          "type": "object",
          "properties": {
            "min": {
              "type": "object",
              "properties": {
                "x": { "type": "number" },
                "y": { "type": "number" },
                "z": { "type": "number" }
              },
              "required": ["x", "y", "z"]
            },
            "max": {
              "type": "object",
              "properties": {
                "x": { "type": "number" },
                "y": { "type": "number" },
                "z": { "type": "number" }
              },
              "required": ["x", "y", "z"]
            }
          },
          "required": ["min", "max"]
        }
      },
      "required": ["center", "radius", "bounds"]
    },
    "entry": {
      "type": "object",
      "properties": {
        "onEnter": {
          "type": "object",
          "properties": {
            "giveGear": { "type": "boolean" },
            "gearList": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "itemName": { "type": "string" },
                  "count": { "type": "integer" },
                  "equip": { "type": "boolean" }
                },
                "required": ["itemName", "count", "equip"]
              }
            },
            "overrideBlood": { "type": "boolean" },
            "bloodType": { "type": "string" },
            "uiEffect": { "type": "string" },
            "glowEffect": { "type": "string" },
            "mapEffect": { "type": "string" },
            "message": { "type": "string" }
          },
          "required": ["giveGear", "gearList", "overrideBlood", "bloodType", "uiEffect", "glowEffect", "mapEffect", "message"]
        },
        "onExit": {
          "type": "object",
          "properties": {
            "removeGear": { "type": "boolean" },
            "restoreBlood": { "type": "boolean" },
            "uiEffect": { "type": "string" },
            "glowEffect": { "type": "string" },
            "mapEffect": { "type": "string" },
            "message": { "type": "string" }
          },
          "required": ["removeGear", "restoreBlood", "uiEffect", "glowEffect", "mapEffect", "message"]
        }
      },
      "required": ["onEnter", "onExit"]
    },
    "mobs": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "mobName": { "type": "string" },
          "count": { "type": "integer" },
          "spawnRate": { "type": "number" },
          "respawnInterval": { "type": "integer" }
        },
        "required": ["mobName", "count", "spawnRate", "respawnInterval"]
      }
    },
    "boss": {
      "type": "object",
      "properties": {
        "bossName": { "type": "string" },
        "bossLevel": { "type": "integer" },
        "respawn": {
          "type": "object",
          "properties": {
            "type": { "type": "string", "enum": ["Interval", "DateTime"] },
            "value": { "type": "string" }
          },
          "required": ["type", "value"]
        },
        "reward": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "itemName": { "type": "string" },
              "count": { "type": "integer" },
              "chance": { "type": "number" }
            },
            "required": ["itemName", "count", "chance"]
          }
        },
        "validation": {
          "type": "object",
          "properties": {
            "requiresDevApproval": { "type": "boolean" },
            "requiresAdmin": { "type": "boolean" }
          },
          "required": ["requiresDevApproval", "requiresAdmin"]
        }
      },
      "required": ["bossName", "bossLevel", "respawn", "reward", "validation"]
    },
    "loot": {
      "type": "object",
      "properties": {
        "chests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "position": {
                "type": "object",
                "properties": {
                  "x": { "type": "number" },
                  "y": { "type": "number" },
                  "z": { "type": "number" }
                },
                "required": ["x", "y", "z"]
              },
              "lootTable": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "itemName": { "type": "string" },
                    "count": { "type": "integer" },
                    "chance": { "type": "number" }
                  },
                  "required": ["itemName", "count", "chance"]
                }
              }
            },
            "required": ["position", "lootTable"]
          }
        },
        "dropTables": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "tableName": { "type": "string" },
              "items": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "itemName": { "type": "string" },
                    "count": { "type": "integer" },
                    "chance": { "type": "number" }
                  },
                  "required": ["itemName", "count", "chance"]
                }
              }
            },
            "required": ["tableName", "items"]
          }
        }
      },
      "required": ["chests", "dropTables"]
    },
    "schematic": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean" },
        "schematicId": { "type": "string" },
        "saveOnComplete": { "type": "boolean" },
        "autoShareToLog": { "type": "boolean" }
      },
      "required": ["enabled", "schematicId", "saveOnComplete", "autoShareToLog"]
    },
    "effects": {
      "type": "object",
      "properties": {
        "ui": {
          "type": "object",
          "properties": {
            "enterEffect": { "type": "string" },
            "exitEffect": { "type": "string" },
            "hudMessage": { "type": "string" }
          },
          "required": ["enterEffect", "exitEffect", "hudMessage"]
        },
        "glow": {
          "type": "object",
          "properties": {
            "enterGlow": { "type": "string" },
            "exitGlow": { "type": "string" }
          },
          "required": ["enterGlow", "exitGlow"]
        },
        "map": {
          "type": "object",
          "properties": {
            "enterMapEffect": { "type": "string" },
            "exitMapEffect": { "type": "string" }
          },
          "required": ["enterMapEffect", "exitMapEffect"]
        }
      },
      "required": ["ui", "glow", "map"]
    },
    "permissions": {
      "type": "object",
      "properties": {
        "requiresDevApproval": { "type": "boolean" },
        "requiresAdmin": { "type": "boolean" },
        "requiresSnapshot": { "type": "boolean" }
      },
      "required": ["requiresDevApproval", "requiresAdmin", "requiresSnapshot"]
    },
    "audit": {
      "type": "object",
      "properties": {
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "logId": { "type": "string" }
      },
      "required": ["createdBy", "createdAt", "logId"]
    }
  },
  "required": [
    "zoneId", "name", "enabled", "difficulty", "description", "location", "entry",
    "mobs", "boss", "loot", "schematic", "effects", "permissions", "audit"
  ]
}